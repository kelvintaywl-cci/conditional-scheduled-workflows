version: 2.1

jobs:
  noop:
    docker:
      - image: cimg/go:1.17.13
    working_directory: /home/circleci/go/sn-backend
    resource_class: small
    steps:
      - run: echo done
  identity:
    resource_class: small
    docker:
      - image: cimg/base:stable
    steps:
      - run:
          name: 
          command: |
            echo "Hello, this is job: ${CIRCLE_WORKFLOW_ID_JOB_ID}"
            echo "And, I was triggered via << pipeline.trigger_source >>"

parameters:
  run_specs_on_main_branch:
    type: boolean
    default: false

workflows:
  main:
    when: true
    jobs:
      - identity:
          filters:
            branches:
              only:
                - /^feature.*/
                - /^bugfix.*/
                - /^other.*/
                - /^hotfix.*/
                - /^release.*/
                - /^revert-.*/
      - noop:
          requires:
            - identity
